apiVersion: v1
kind: Secret
metadata:
  name: webservice-mock-endpoint
  namespace: finops-test
stringData:
  server-url: http://<host>:<port>
---
apiVersion: finops.krateo.io/v1
kind: ExporterScraperConfig
metadata:
  name: exporterscraperconfig-sample
  namespace: finops-test
spec:
  exporterConfig:
    api: 
      path: /costs/gzip
      verb: GET
      endpointRef:
        name: webservice-mock-endpoint
        namespace: finops-test
    metricType: cost
    pollingInterval: "5s"
    additionalVariables:
      host: WEBSERVICE_API_MOCK_SERVICE_HOST
      port: WEBSERVICE_API_MOCK_SERVICE_PORT
  scraperConfig:
    pollingInterval: "5s"
    tableName: testfocus
    scraperDatabaseConfigRef:
      name: cratedb-config
      namespace: finops-test